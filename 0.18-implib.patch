--- origsrc/gmpc-0.18.0/configure.ac	2009-03-09 11:23:10.000000000 -0500
+++ src/gmpc-0.18.0/configure.ac	2009-07-15 00:17:17.083798700 -0500
@@ -282,11 +283,14 @@ case $host in
     EXTRA_CFLAGS="$EXTRA_CFLAGS -mno-cygwin -mwindows -mms-bitfields"
     EXTRA_LDFLAGS="-export-all-symbols -mwindows -mms-bitfields" ;;
   *-*-cygwin*)
-    win32=yes
-    EXTRA_LDFLAGS="-export-all-symbols -mms-bitfields" ;;
+    cygwin=yes
+    GMPC_IMPLIB="-lgmpc"
+    EXTRA_LDFLAGS="-Wl,--export-all-symbols -Wl,--out-implib,libgmpc.a" ;;
   *-apple-darwin*)
     macosx=yes;;
 esac
+AC_SUBST(GMPC_IMPLIB)
+AM_CONDITIONAL(CYGWIN, test x$cygwin = xyes)
 AM_CONDITIONAL(WIN32, test x$win32 = xyes)
 AM_CONDITIONAL(OSX, test x$macosx = xyes)
 
--- origsrc/gmpc-0.18.0/data/gmpc.pc.in	2009-03-09 11:23:09.000000000 -0500
+++ src/gmpc-0.18.0/data/gmpc.pc.in	2009-07-15 00:17:43.860457800 -0500
@@ -8,3 +8,4 @@ Description: Header files for gmpc plugi
 Requires: libmpd glib-2.0 gtk+-2.0 
 Version: @VERSION@
 Cflags: -I${includedir}
+Libs: -L${libdir} @GMPC_IMPLIB@
--- origsrc/gmpc-0.18.0/src/Makefile.am	2009-03-09 11:23:05.000000000 -0500
+++ src/gmpc-0.18.0/src/Makefile.am	2009-07-15 00:18:37.558778300 -0500
@@ -157,6 +157,12 @@ gmpcinclude_HEADERS = \
 
 gmpcincludedir =$(includedir)/gmpc/
 
+if CYGWIN
+install-data-local:
+	$(mkinstalldirs) $(DESTDIR)$(libdir)
+	$(INSTALL_DATA) libgmpc.a $(DESTDIR)$(libdir)/libgmpc.a
+endif
+
 EXTRA_DIST=\
 		playlist3.h\
 		playlist3-keybindings.h\
