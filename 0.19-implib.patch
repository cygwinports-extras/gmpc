--- origsrc/gmpc-0.19.1/configure.ac	2009-10-14 21:37:02.000000000 -0500
+++ src/gmpc-0.19.1/configure.ac	2010-02-09 02:12:59.200270800 -0600
@@ -312,12 +312,15 @@ case $host in
     EXTRA_CFLAGS="$EXTRA_CFLAGS -mno-cygwin -mwindows -mms-bitfields"
     EXTRA_LDFLAGS="-export-all-symbols -mwindows -mms-bitfields" ;;
   *-*-cygwin*)
-    win32=yes
-    EXTRA_LDFLAGS="-export-all-symbols -mms-bitfields" ;;
+    cygwin=yes
+    GMPC_IMPLIB="-lgmpc"
+    EXTRA_LDFLAGS="-Wl,--export-all-symbols -Wl,--out-implib,libgmpc.a" ;;
   *-apple-darwin*)
     EXTRA_LDFLAGS="-framework Carbon" 
     macosx=yes;;
 esac
+AC_SUBST(GMPC_IMPLIB)
+AM_CONDITIONAL(CYGWIN, test x$cygwin = xyes)
 AM_CONDITIONAL(WIN32, test x$win32 = xyes)
 AM_CONDITIONAL(OSX, test x$macosx = xyes)
 # for smclient 
--- origsrc/gmpc-0.19.1/data/gmpc.pc.in	2009-10-14 21:36:36.000000000 -0500
+++ src/gmpc-0.19.1/data/gmpc.pc.in	2010-02-09 02:13:28.715959000 -0600
@@ -8,3 +8,4 @@ Description: Header files for gmpc plugi
 Requires: libmpd glib-2.0 gtk+-2.0 
 Version: @VERSION@
 Cflags: -I${includedir} -I${includedir}/gmpc
+Libs: -L${libdir} @GMPC_IMPLIB@
--- origsrc/gmpc-0.19.1/src/Makefile.am	2009-10-14 21:36:36.000000000 -0500
+++ src/gmpc-0.19.1/src/Makefile.am	2010-02-09 02:13:56.846568000 -0600
@@ -187,6 +187,12 @@ gmpcinclude_HEADERS = \
 
 gmpcincludedir =$(includedir)/gmpc/
 
+if CYGWIN
+install-data-local:
+	$(mkinstalldirs) $(DESTDIR)$(libdir)
+	$(INSTALL_DATA) libgmpc.a $(DESTDIR)$(libdir)/libgmpc.a
+endif
+
 EXTRA_DIST=\
 		playlist3.h\
 		playlist3-keybindings.h\
