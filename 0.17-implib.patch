--- origsrc/gmpc-0.17.0/configure.ac	2008-12-25 15:54:31.000000000 -0600
+++ src/gmpc-0.17.0/configure.ac	2009-02-27 11:11:23.546000000 -0600
@@ -228,13 +228,16 @@ case $host in
     EXTRA_CFLAGS="$EXTRA_CFLAGS -mno-cygwin -mwindows -mms-bitfields"
     EXTRA_LDFLAGS="-export-all-symbols -mwindows -mms-bitfields -lregex" ;;
   *-*-cygwin*)
-    win32=yes
-    EXTRA_LDFLAGS="-export-all-symbols -mms-bitfields" ;;
+    cygwin=yes
+    GMPC_IMPLIB="-lgmpc"
+    EXTRA_LDFLAGS="-Wl,--export-all-symbols -Wl,--out-implib,libgmpc.a" ;;
   *-apple-darwin*)
     macosx=yes;;
 esac
 AM_CONDITIONAL(WIN32, test x$win32 = xyes)
+AM_CONDITIONAL(CYGWIN, test x$cygwin = xyes)
 AM_CONDITIONAL(OSX, test x$macosx = xyes)
+AC_SUBST(GMPC_IMPLIB)
 if test x$macosx = xyes; then
 # mac integration 
 PKG_CHECK_MODULES([macint],ige-mac-integration)
--- origsrc/gmpc-0.17.0/data/gmpc.pc.in	2008-12-25 15:54:31.000000000 -0600
+++ src/gmpc-0.17.0/data/gmpc.pc.in	2009-02-27 11:05:38.514750000 -0600
@@ -8,3 +8,4 @@ Description: Header files for gmpc plugi
 Requires: libmpd
 Version: @VERSION@
 Cflags: -I${includedir}
+Libs: -L${libdir} @GMPC_IMPLIB@
--- origsrc/gmpc-0.17.0/src/Makefile.am	2008-12-25 15:54:31.000000000 -0600
+++ src/gmpc-0.17.0/src/Makefile.am	2009-02-27 11:05:05.421000000 -0600
@@ -204,3 +204,10 @@ endif
 DISTCLEANFILES=\
 			   revision.h\
 			   Makefile.config
+
+if CYGWIN
+install-data-local:
+	$(mkinstalldirs) $(DESTDIR)$(libdir)
+	$(INSTALL_DATA) libgmpc.a $(DESTDIR)$(libdir)/libgmpc.a
+
+endif
